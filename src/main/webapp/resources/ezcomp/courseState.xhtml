<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core">

	<!-- INTERFACE -->
	<cc:interface>
		<cc:attribute name="course" required="true" type="db.entity.Courses"/>
		<cc:attribute name="hasDates" required="false" default="false" type="boolean"/>
		<cc:facet name="open"/>
		<cc:facet name="started"/>
		<cc:facet name="finished"/>
	</cc:interface>

	<!-- IMPLEMENTATION -->
	<cc:implementation>

		<h:outputFormat rendered="#{cc.attrs.hasDates}">
			С <h:outputText value="#{cc.attrs.course.startsAt}">
				<f:convertDateTime dateStyle="short"/>
			</h:outputText> 
			по <h:outputText value="#{cc.attrs.course.endsAt}">
				<f:convertDateTime dateStyle="short"/>
			</h:outputText>
		</h:outputFormat>
		
		<h:outputFormat rendered="#{cc.attrs.course.open}" style="background-color: lightblue;">
			<span class="cursus-icon icon-status icon-status-open"/>
			<span class="status-open"> Идёт набор </span>
			<p:outputLabel rendered="#{ctx.isCourseOfUser(cc.attrs.course)}" 
						   class="but-icon icon-action-circle" title="Курс в списке"/>
			<cc:renderFacet name="open"/>
		</h:outputFormat>
		<h:outputFormat rendered="#{cc.attrs.course.started}" style="background-color: #F0D0D0;">
			<span class="cursus-icon icon-status icon-status-begin"/>
			<span class="status-begin"> Идёт обучение </span>
			<p:outputLabel rendered="#{ctx.isCourseOfUser(cc.attrs.course)}" 
						   class="but-icon icon-action-circle" title="Курс в списке"/>
			<cc:renderFacet name="started"/>
		</h:outputFormat>
		<h:outputFormat rendered="#{cc.attrs.course.finished}" style="background-color: lightgray;">
			<span class="cursus-icon icon-status icon-status-close"/>
			<span class="status-close"> Курс завершён </span>
			<p:outputLabel rendered="#{ctx.isCourseOfUser(cc.attrs.course)}" 
						   class="but-icon icon-action-circle" title="Курс в списке"/>
			<cc:renderFacet name="finished"/>
		</h:outputFormat>
	</cc:implementation>
</html>