<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:z="http://xmlns.jcp.org/jsf/passthrough">

	<ui:composition template="/WEB-INF/templates/main2.xhtml">

		<ui:define name="metadata">
			<f:metadata>
				<f:viewAction immediate="true" action="#{ctx.checkUserRole('admin')}"/>
				<f:viewParam name="uuid" value="#{profile.userUuid}"/>
				<f:viewAction action="#{ctx.checkNotNull(profile.user)}"/>
			</f:metadata>
		</ui:define>
		
		<ui:define name="content">

			<script src="http://cdn.tinymce.com/4/tinymce.min.js"></script>
			<script>tinymce.init({ selector:'textarea.tinymce' });</script>

				<div class="col-sm-8 col-xs-12">
					<article id="single-article" class="single-article white-box roboto">
						<div class="content-inner-side">
							<h3>Профиль преподавателя 
								<h:outputText value="#{profile.user.name}"/>
							</h3>
							<h:form enctype="multipart/form-data" styleClass="add-information">
								<h:inputText id="userName" value="#{profile.user.name}" styleClass="form-control" 
											 z:placeholder="Имя *" required="true" requiredMessage="Необходимо указать имя"/>
								<h:inputText id="fullUserName" value="#{profile.user.fullName}" styleClass="form-control" 
											 z:placeholder="Полное Имя *" required="true" requiredMessage="Необходимо указать полное имя"/>
								<div class="box">
									<img src="#{app.avatar.getUserUrl(profile.user, 'MEDIUM')}" title="Аватар" style="margin-right: 20px;"/>
									<ui:fragment>
										<h:inputFile id="userAvatar" value="#{profile.part}" styleClass="inputfile inputfile-6" z:accept="image/*" />
										<h:outputLabel for="userAvatar"><span></span> <strong><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/></svg> 
											Загрузите фотографию&hellip;</strong></h:outputLabel>
									</ui:fragment>
									<div class="clearfix"></div>
									<div class="spacer" style="height: 20px;"></div>
									<h:inputTextarea id="userInfo" value="#{profile.user.personalInfo}"
													 cols="30" rows="10" styleClass="tinymce"/>
									<div class="spacer" style="height: 20px;"></div>
									<h:commandButton action="#{profile.saveUser}" 
													 styleClass="btn btn-main-theme btn-md" value="Изменить"/>
								</div>
							</h:form>
						</div>
						
					</article>
				</div>

				<script src="/mm-res/js/custom-file-input.js"></script>

		</ui:define>
		
	</ui:composition>

</html>

